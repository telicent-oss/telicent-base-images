schema_version: 1

from: "registry.access.redhat.com/ubi9-minimal:9.5-1731593028"  # User versioned image to allow dependabot updates

name: &name "telicent-nodejs20"
version: &version "1.0.1"
description: "Telicent's NodeJS base image built on Red Hat UBI9 minimal."

# Ensure compliance with Red Hat UBI EULA
labels:
  - name: "name"
    value: *name
  - name: "version"
    value: *version
  - name: "description"
    value: "Telicent's base NodeJS 20 image built on Red Hat UBI9 minimal"
  - name: "com.redhat.license_terms"
    value: "https://www.redhat.com/en/about-red-hat-end-user-license-agreements#UBI" # DO NOT REMOVE
  - name: "io.k8s.display-name"
    value: "Telicent UBI NodeJS 20 Base"
  - name: "io.openshift.tags"
    value: "base ubi9 nodejs20"
  - name: "org.opencontainers.image.source"
    value: "https://github.com/telicent-oss/telicent-base-images"
  - name: "summary"
    value: "Telicent Base NodeJS Image built from Red Hat Universal Base Image 9 with added non root default user"
  - name: "maintainer"
    value: "Telicent OSS <opensource@telicent.io>"
  - name: "vendor"
    value: "Telicent OSS"
  - name: "org.opencontainers.image.authors"
    value: "Telicent OSS <opensource@telicent.io>"
  - name: "org.opencontainers.image.vendor"
    value: "Telicent OSS"

ports:
- value: 8080

envs:
  - name: "LANG"
    value: "en_US.UTF-8"
  - name: "LC_ALL"
    value: "en_US.UTF-8"
  - name: "NODEJS_VERSION"
    value: "20"
  - name: "NPM_RUN"
    value: "start"

packages:
  manager: microdnf

modules:
  repositories:
   - path: ../modules
  install:
    - name: telicent.container.nodejs
    - name: telicent.container.util.cleanup
